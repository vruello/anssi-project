{% extends "server/session.html" %}
{% block session_content %}

<script language="javascript">
function updateStatus(msg) {
	var status = document.getElementById("status");
	status.innerText = msg;
}

function noImage() {
  document.getElementById("streamer").style = "display:none";
  updateStatus("Waiting");
}

var i = 0;
function updateFrame() {
  var img = document.getElementById("streamer");
  img.src = "{{ stream_path }}" + i;
  img.style = "display:";
  updateStatus("Playing");
  i++;
}

setInterval(function() { updateFrame(); }, 25);

</script>

<p class="mb-4">
	<a class="btn btn-outline-primary" href="{% url "session_live" id %}">Commencer/terminer le live</a>
</p>

<noscript>
  <h2><font color="red">Error: You need Javascript enabled to watch the stream.</font></h2>
</noscript>

Status : <span id="status"></span>

<br>
<img onerror="noImage()" id="streamer">

{% endblock %}
